from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
import time
import re

# ğŸ”¹ WebDriver yolu (KENDÄ° ChromeDriver yolunu ekleyin!)
webdriver_path = "C:\\Users\\askan\\Desktop\\Ã¼nivers\\chromedriver.exe"

# ğŸ”¹ WebDriver baÅŸlat
service = Service(webdriver_path)
options = webdriver.ChromeOptions()
driver = webdriver.Chrome(service=service, options=options)

# ğŸ”¹ Hedef URL'yi aÃ§
url = "https://kdu.md/en/struktura-universiteta/fakultety/fakultet-natsionalnoj-kultury/departament-tyurkologii/akademik/akademikkadro"
driver.get(url)

# ğŸ”¹ SayfanÄ±n yÃ¼klenmesini bekle
time.sleep(5)  # Gerekirse artÄ±r

# ğŸ”¹ SayfanÄ±n tÃ¼m HTML iÃ§eriÄŸini al
html_content = driver.page_source

# ğŸ”¹ HTML iÃ§eriÄŸinden e-postalarÄ± bul
emails = []
email_pattern = r'[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}'
found_emails = re.findall(email_pattern, html_content)

emails.extend(found_emails)

# ğŸ”¹ JavaScript ile gizlenmiÅŸ e-postalarÄ± bul
email_elements = driver.find_elements(By.XPATH, "//span[contains(@id, 'cloak')]")

for elem in email_elements:
    try:
        email_text = elem.text.strip()
        if "@" in email_text:
            emails.append(email_text)
    except:
        continue

# ğŸ”¹ TekrarlarÄ± temizle
emails = list(set(emails))

# ğŸ”¹ Terminale yazdÄ±r
for email in emails:
    print(email)

# ğŸ”¹ TarayÄ±cÄ±yÄ± kapat
driver.quit()
